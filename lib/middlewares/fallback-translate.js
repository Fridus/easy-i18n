// Generated by CoffeeScript 1.6.3
(function() {
  var _;

  _ = require('lodash');

  module.exports = function(options) {
    options = _.extend({
      fallback_language: 'en'
    }, options);
    return function(i18n) {
      var _missing;
      _missing = i18n.missing;
      return i18n.missing = function(language, ns, key) {
        var res;
        if (language === options.fallback_language) {
          return _missing.apply(i18n, arguments);
        } else {
          res = i18n.translate(options.fallback_language, ns, key, {
            missing: false
          });
          if (res) {
            return res;
          } else {
            return _missing.apply(i18n, arguments);
          }
        }
      };
    };
  };

}).call(this);
